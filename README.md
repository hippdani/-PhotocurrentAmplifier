# Documentation of Photocurrent Sampling Amplifier
## Daniel Hipp, TU Graz 2024
This document contains a detailed description of how to build and use a transimpedance amplifier that is specifically 
tuned to the task of photocurrent sampling (PhotCurrentSampingAmplifier = PCSA). A more concise description containing the minimum information to build and 
operate the device is contained in 
[QuickGuidePCSA_EN.pdf](https://github.com/hippdani/PhotocurrentAmplifier/blob/main/QuickGuidePCSA_EN.pdf).
More information on the design process is available in the bachelor thesis ‘Photocurrent Sampling in free Air’ by 
Daniel Hipp. Files mentioned within the document are available in the repository [PhotocurrentAmplifier](https://github.com/hippdani/PhotocurrentAmplifier).

The intended use of the PCB described in here is to amplify currents produced by a strong laser field that interacts with 
some gas or material. The PCB can be operated in a fine to high vacuum to observe ions of pure gases at low pressures.
The currents are collected at the electrodes A and B and can range from pA to µA according to the amplification gain 
that is chosen. To collect 
these currents, electrodes made out of sheet metal can be soldered onto the gold plated electrodes. To prevent the electrode
elements from acting as antenna, the whole PCB should be placed inside a metal enclosure. A more detailed description of
how to ground the enclosure is contained in chapter 5 of the [documentation](https://github.com/hippdani/PhotocurrentAmplifier/blob/main/PCS_amplifier_docu_EN.pdf)


<p align="center">
  <img src="https://github.com/user-attachments/assets/9bd4391b-f61f-48bb-a2c0-a7f8aa16fee4" width="600">
  <br>
  Fig. 1, Inputs and Outputs on PCB
</p>

The outputs are SMA connectors with a range from +/- 2.5 V, where linearity is guaranteed up to +/- 2 V when connected 
to a load of 1k$\Ohm$ or bigger. 

The PCB displayed above can be populated in several ways to adapt its functionality:
- Electrode A will always be an input, but B can be either:
   - an input @ 0 V bias 
   - an input with a constant bias voltage
   - a bias electrode with fixed voltage 
   - a bias electrode with externally controlled bias voltage
- The transimpedance gain and bandwidth can be set for both channels individually
- A single sided or symmetrical power supply can be used
   - populate PS1 and supply +/- 2.5 V
   - populate PS2 and supply approx. 3.3 V. The negative rail will be created by a charge pump
   
The [documentation](https://github.com/hippdani/PhotocurrentAmplifier/blob/main/PCS_amplifier_docu_EN.pdf) contains detailed information 
on how to choose a configuration and calculate the component values for different gains and bandwidths.

##Low Noise Voltage Supply
To supply a potential free voltage for the PS1 configuration it is advised to either use a battery with a linear 
regulator to maintain 5 V, or a well regulated power supply with little noise. Instructions to build a low noise regulator
suited for both batteries and switch mode power supplies is contained in the folder [LowNoisePSU](https://github.com/hippdani/PhotocurrentAmplifier/tree/main/LowNoisePSU)

##Lock In Amplifier
When used to detect photocurrents generated by a pulsed laser, the signal-to-noise ratio can be vastly improved by 
using a lock in amplifier. This lock in amplifier can be set to the reference frequency of the laser pulses and will
 then reject the noise, that is not pulsed with the reference frequency. Alternatively a Boxcar averager does a similar thing.
If no commercial lock in amplifier or boxcar avergaer is at hand, consider the on described in my other [project](https://github.com/hippdani/lockInAmplifier)
(work in progress)

##Photodiode Amplifier Modification
#TODO
- upload picture / files / BOM
- describe use
- describe the photodiodes

The circuit of the PCSA is also suited to convert the photocurrent of a photodiode with little modifications. 
The modifications are necessary to accomodate the reverse bias voltage that is needed for fast operation of a photodiode.
The high pass filter that blocks out the DC from the bias forms a band pass filter together with the intrinsic low pass 
filter of the transimpedance amplifier.

The high capacity of large are (XUV-) photodiodes limits the achievable bandwidth because stability can not be achieved 
at high frequencies and high gains (Max. gain XX Ohm for Model XY photodiode to achieve 1 MHz -3dB Bandwidth).
Additionally, the large are can act as antenna for stray signals and induce oscillations on its own.
Therefore, proper shielding is required around the photodiode.